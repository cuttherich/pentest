#!/bin/bash

echo "domain is $1"

domain=$1

mkdir $domain

cd $domain

$(which subfinder) -d $domain -o subfinder_$domain

$(which assetfinder) $domain > asset_$domain

$(which amass) enum -d $domain > amass_$domain

cat subfinder_$domain > 1_$domain
cat asset_$domain >> 1_$domain
cat amass_$domain >> 1_$domain
cat 1_$domain | sort -u > hosts_$domain

rm -rf subfinder_$domain asset_$domain amass_$domain 1_$domain

for i in $(cat hosts_$domain);do echo "HOST COMMAND RESULT FOR $i\n" && host $i; done  > afterhost_$domain

grep -E -o "([0-9]{1,3}[\.]){3}[0-9]{1,3}" afterhost_$domain | sort -u > IPlist_$domain

echo " "
echo " "
echo " "
echo " "
 
echo "___________...___________You Can Grab the IP List now!___________...___________"

echo " "
echo " "
echo " "
echo " "
echo " "

cat hosts_$domain | $(which httprobe) > probed_$domain

nuclei -ut
echo " "
echo " "
echo " "
echo " "
echo " "

echo "_________...________NUCLEI STARTED NOW!_________..._________"

echo " "
echo " "
echo " "
echo " "
echo " "

sudo $(which nuclei) -l probed_$domain -o nuclei_$domain

sudo $(which nuclei) -l hosts_$domain -o nuclei_$subdomain

#for i in $(cat probed_$domain);do nuclei -u $i > nuclei_$i;done

echo "_________...________NMAP STARTED NOW!_________..._________"

for i in $(cat hosts_$domain);do sudo nmap -sC -sV --script vuln $i -Pn -oN nmapresult_$i;done
